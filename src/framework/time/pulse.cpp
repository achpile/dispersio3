#include "meta/headers.hpp"


/***********************************************************************
     * Pulse
     * constructor

***********************************************************************/
ach::Pulse::Pulse()
{
	set(0.0f);
}



/***********************************************************************
     * Pulse
     * destructor

***********************************************************************/
ach::Pulse::~Pulse()
{
}



/***********************************************************************
     * Pulse
     * set

***********************************************************************/
void ach::Pulse::set(float _timer)
{
	active = true;
	timer  = _timer;
	value  = _timer;
}



/***********************************************************************
     * Pulse
     * reset

***********************************************************************/
void ach::Pulse::reset()
{
	active = true;
	value  = timer;
}



/***********************************************************************
     * Pulse
     * update

***********************************************************************/
bool ach::Pulse::update(bool real)
{
	if (timer <= 0.0f)
		return false;

	value -= tm->get(real);

	while (value <= 0.0f)
	{
		value  += timer;
		active  = !active;
	}

	return active;
}
